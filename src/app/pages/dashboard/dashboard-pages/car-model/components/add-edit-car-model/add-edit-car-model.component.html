<div class="py-8">
    <div class="w-full mb-4">
      <h2 class="text-xl font-semibold">{{ isEditMode ? 'Edit Car Model' : 'Add Car Model' }}</h2>
    </div>
  
    @if (message.text) {
      <div [ngClass]="{
        'bg-green-100 border-green-400 text-green-700': message.type === 'success',
        'bg-red-100 border-red-400 text-red-700': message.type === 'error',
        'bg-yellow-100 border-yellow-400 text-yellow-700': message.type === 'warn'
      }" class="border px-4 py-3 rounded relative mb-4" role="alert">
        <strong class="font-bold">{{ message.type === 'success' ? 'Success!' : message.type === 'error' ? 'Error!' : 'Warning!' }}</strong>
        <span class="block sm:inline ml-2">{{ message.text }}</span>
      </div>
    }
  
    <form [formGroup]="carModelForm" (ngSubmit)="onSubmit()" class="w-full">
      <div class="flex flex-col sm:flex-row gap-4 mb-6">
        <!-- Car Type Dropdown -->
        <div class="flex-1 w-full">
          <label for="car_brand_id" class="flex items-center gap-1 mx-2 mb-2 font-semibold">Car Brand</label>
          <div class="w-full">
            <p-dropdown
              id="car_brand_id"
              formControlName="car_brand_id"
              [options]="carBrands"
              optionLabel="en_title"
              optionValue="id"
              [showClear]="false"
              placeholder="Select Car Brand"
              [ngClass]="{ 'ng-invalid ng-dirty': carModelForm.get('car_brand_id')?.invalid && carModelForm.get('car_brand_id')?.touched }"
              class="w-full"  
              [style]="{'width': '100%'}"
            ></p-dropdown>
            <div class="h-6 mt-2">
              <small
                *ngIf="carModelForm.get('car_brand_id')?.touched && carModelForm.get('car_brand_id')?.errors?.['required']"
                class="text-red-500 text-sm mx-4 block"
              >Car Brand is required</small>
            </div>
          </div>
        </div>
  
        <!-- English Title Input -->
        <div class="flex-1 w-full">
          <label for="en_title" class="flex items-center gap-1 mx-2 mb-2 font-semibold">English Title</label>
          <div class="w-full">
            <input
              id="en_title"
              type="text"
              pInputText
              formControlName="en_title"
              placeholder="Enter English Title"
              [ngClass]="{ 'ng-invalid ng-dirty': carModelForm.get('en_title')?.invalid && carModelForm.get('en_title')?.touched }"
              class="w-full border rounded form-input"
            />
            <div class="h-6 mt-2">
              <small
                *ngIf="carModelForm.get('en_title')?.touched && carModelForm.get('en_title')?.errors?.['required']"
                class="text-red-500 text-sm mx-4 block"
              >English Title is required</small>
            </div>
          </div>
        </div>
  
        <!-- Arabic Title Input -->
        <div class="flex-1 w-full">
          <label for="ar_title" class="flex items-center gap-1 mx-2 mb-2 font-semibold">Arabic Title</label>
          <div class="w-full">
            <input
              id="ar_title"
              type="text"
              pInputText
              formControlName="ar_title"
              placeholder="Enter Arabic Title"
              [ngClass]="{ 'ng-invalid ng-dirty': carModelForm.get('ar_title')?.invalid && carModelForm.get('ar_title')?.touched }"
              class="w-full border rounded form-input"
            />
            <div class="h-6 mt-2">
              <small
                *ngIf="carModelForm.get('ar_title')?.touched && carModelForm.get('ar_title')?.errors?.['required']"
                class="text-red-500 text-sm mx-4 block"
              >Arabic Title is required</small>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Status Switch and Submit Button -->
      <div class="flex gap-2 mx-4 items-center">
        <div>
          <div class="flex gap-2 items-center">
            <p-inputSwitch id="active_status" formControlName="active_status"></p-inputSwitch>
            <label for="active_status" class="text-lg">
              {{ carModelForm.get('active_status')?.value ? 'Active' : 'Inactive' }}
            </label>
          </div>
        </div>
        <div class="flex-1"></div>
        <button
          class="px-4 py-2 bg-blue-500 text-white rounded text-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"
          type="submit"
          [disabled]="loading || !carModelForm.valid"
        >
          {{ loading ? 'Loading...' : isEditMode ? 'Update' : 'Submit' }}
        </button>
      </div>
    </form>
  </div>